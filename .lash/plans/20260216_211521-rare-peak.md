# Plan: Improve Plan Mode UI Indicators

## Context

Plan mode is toggled via Shift+Tab. Currently it has:
- A "PLAN" badge in the status bar (ui.rs:63-71) — good
- A system message "Switched to plan mode" in the chat — good
- The plan file content renders as a bordered PLAN block (ui.rs:579+) — good
- The help bar at the bottom still shows the same keys as normal mode (ui.rs:1064-1077)

## Problem

When in plan mode, the bottom help bar doesn't change to reflect the different context.
The user sees "S-Tab plan" but doesn't get feedback that they're *in* plan mode or how
to get back. The help bar should adapt to the current mode.

## Proposed Changes

### 1. Update help bar for plan mode (`lash-cli/src/ui.rs`)

In the help bar rendering (around line 1063), check `app.mode` and show different
help text when in Plan mode:

```
Plan mode:  S-Tab normal  |  ^U/^D scroll  |  ^C quit
Normal mode: ^U/^D scroll  |  S-Tab plan  |  ^O code  |  S-Enter newline  |  ^Y copy  |  ^C quit
```

This means the "S-Tab" label changes from "plan" to "normal" to indicate what
pressing it will *do* (switch back).

### 2. Location of change

- **File:** `lash-cli/src/ui.rs`
- **Function:** The help bar builder around lines 1050-1078
- **Change:** Add a branch for `app.mode == Mode::Plan` that shows a reduced
  help bar with "S-Tab normal" instead of "S-Tab plan"

### 3. Implementation detail

The help bar is already conditionally rendered (there's an `if`/`else` for
prompt-active vs idle). Add a third branch or nest the plan check inside the
idle branch:

```rust
// Inside the else branch (not in prompt mode):
if app.mode == crate::app::Mode::Plan {
    vec![
        Span::styled(" ^U/^D", theme::help_key()),
        Span::styled(" scroll  ", theme::help_desc()),
        Span::styled("S-Tab", theme::help_key()),
        Span::styled(" normal  ", theme::help_desc()),
        Span::styled("^C", theme::help_key()),
        Span::styled(" quit", theme::help_desc()),
    ]
} else {
    // existing normal mode help bar
}
```

## Risks

- **Low risk** — purely cosmetic change, no logic affected
- Only touches the help bar rendering in ui.rs
- No new dependencies

## Steps to Execute

1. Open `lash-cli/src/ui.rs`
2. Find the help bar `else` branch (~line 1063)
3. Wrap existing content in a `Mode::Normal` check
4. Add `Mode::Plan` branch with adapted help text
5. Build and verify: `cargo build 2>&1`
6. Manual test: toggle plan mode, confirm help bar updates
